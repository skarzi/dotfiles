#!/usr/bin/tmux source-file

# work session
new-session -d \
            -c {{ project_path }} \
            -s '{{ project_name }}' \
            -n 'dev'
# dev window
split-window -d \
             -c {{ project_path }} \
             -t 0 \
             -h \
             -p 40
split-window -d \
             -c {{ project_path }} \
             -t 1 \
             -v \
             -p 35
split-window -d \
             -c {{ project_path }} \
             -t 1 \
             -h \
             -p 80
# pane 0 - vim
send-keys -t 0 'workon {{ project_name }}' enter
send-keys -t 0 'add_ssh_key ~/.ssh/{{ ssh_key }}' enter
# pane 1 - bash
send-keys -t 1 'workon {{ project_name }}' enter
send-keys -t 1 'add_ssh_key ~/.ssh/{{ ssh_key }}' enter
# pane 2 - server
send-keys -t 2 'workon {{ project_name }}' enter
send-keys -t 2 'docker-compose up app'
# pane 3 - bash
send-keys -t 3 'workon {{ project_name }}' enter
send-keys -t 3 'add_ssh_key ~/.ssh/{{ ssh_key }}' enter

# bash window
new-window -a \
           -c {{ project_path }} \
           -n 'bash'
split-window -d \
             -c {{ project_path }} \
             -t 0 \
             -h \
             -p 40
# pane 0 - shell
send-keys -t 0 'workon {{ project_name }}' enter
# pane 1 - vpn
send-keys -t 1 'sudo openvpn --config {{ vpn_config_file }}' enter

select-window -t 'dev'
select-pane -t 0
